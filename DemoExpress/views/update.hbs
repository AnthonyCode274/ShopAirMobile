<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>

  <!-- CSS Handler -->
  <link id="sleek-css" rel="stylesheet" href="/assets/css/style_insert_products.css" />

</head>

<body class="sidebar-fixed sidebar-dark header-light header-fixed">


  <div class="wrapper">

    <!--
          ====================================
          ——— LEFT SIDEBAR WITH FOOTER
          =====================================
        -->
    <aside class="left-sidebar bg-sidebar">
      <div id="sidebar" class="sidebar sidebar-with-footer">
        <!-- Aplication Brand -->
        <div class="app-brand">
          <a href="/products">
            <svg class="brand-icon" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid" width="30"
              height="33" viewBox="0 0 30 33">
              <g fill="none" fill-rule="evenodd">
                <path class="logo-fill-blue" fill="#7DBCFF" d="M0 4v25l8 4V0zM22 4v25l8 4V0z" />
                <path class="logo-fill-white" fill="#FFF" d="M11 4v25l8 4V0z" />
              </g>
            </svg>
            <span class="brand-name">Sleek Dashboard</span>
          </a>
        </div>
        <!-- begin sidebar scrollbar -->
        <div class="sidebar-scrollbar">

          <!-- sidebar menu -->
          <ul class="nav sidebar-inner" id="sidebar-menu">
            <li class="has-sub active expand">
              <a class="sidenav-item-link" href="javascript:void(0)" data-toggle="collapse" data-target="#dashboard"
                aria-expanded="false" aria-controls="dashboard">
                <i class="mdi mdi-view-dashboard-outline"></i>
                <span class="nav-text">Dashboard</span> <b class="caret"></b>
              </a>
              <ul class="collapse show" id="dashboard" data-parent="#sidebar-menu">
                <div class="sub-menu">
                  <li class="active">
                    <a class="sidenav-item-link" href="/products">
                      <span class="nav-text">Products</span>
                    </a>
                  </li>
                  <li>
                    <a class="sidenav-item-link" href="/products/category">
                      <span class="nav-text">Category</span>
                    </a>
                  </li>
                </div>
              </ul>
            </li>

            <li class="has-sub">
              <a class="sidenav-item-link" href="javascript:void(0)" data-toggle="collapse" data-target="#pages"
                aria-expanded="false" aria-controls="pages">
                <i class="mdi mdi-image-filter-none"></i>
                <span class="nav-text">Pages</span> <b class="caret"></b>
              </a>
              <ul class="collapse" id="pages" data-parent="#sidebar-menu">
                <div class="sub-menu">

                  <li>
                    <a class="sidenav-item-link" href="user-profile.html">
                      <span class="nav-text">User Profile</span>
                    </a>
                  </li>
                  <li class="has-sub">
                    <a class="sidenav-item-link" href="javascript:void(0)" data-toggle="collapse"
                      data-target="#authentication" aria-expanded="false" aria-controls="authentication">
                      <span class="nav-text">Authentication</span> <b class="caret"></b>
                    </a>
                    <ul class="collapse" id="authentication">
                      <div class="sub-menu">

                        <li>
                          <a href="/login">Sign In</a>
                        </li>

                        <li>
                          <a href="/register">Sign Up</a>
                        </li>

                      </div>
                    </ul>
                  </li>

                </div>
              </ul>
            </li>
          </ul>
        </div>

        <hr class="separator" />

        <div class="sidebar-footer">
          <div class="sidebar-footer-content">
            <h6 class="text-uppercase">
              Cpu Uses <span class="float-right">40%</span>
            </h6>
            <div class="progress progress-xs">
              <div class="progress-bar active" style="width: 40%;" role="progressbar"></div>
            </div>
            <h6 class="text-uppercase">
              Memory Uses <span class="float-right">65%</span>
            </h6>
            <div class="progress progress-xs">
              <div class="progress-bar progress-bar-warning" style="width: 65%;" role="progressbar"></div>
            </div>
          </div>
        </div>
      </div>
    </aside>



    <div class="page-wrapper">
      <!-- Header -->
      <header class="main-header " id="header">
        <nav class="navbar navbar-static-top navbar-expand-lg">
          <!-- Sidebar toggle button -->
          <button id="sidebar-toggler" class="sidebar-toggle">
            <span class="sr-only">Toggle navigation</span>
          </button>
          <!-- search form -->
          <div class="search-form d-none d-lg-inline-block">
            <div class="input-group">
              <button type="button" name="search" id="search-btn" class="btn btn-flat">
                <i class="mdi mdi-magnify"></i>
              </button>
              <input type="text" name="query" id="search-input" class="form-control"
                placeholder="'button', 'chart' etc." autofocus autocomplete="off" />
            </div>
            <div id="search-results-container">
              <ul id="search-results"></ul>
            </div>
          </div>

          <div class="navbar-right ">
            <ul class="nav navbar-nav">

              <li class="dropdown notifications-menu">
                <button class="dropdown-toggle" data-toggle="dropdown">
                  <i class="mdi mdi-bell-outline"></i>
                </button>
                <ul class="dropdown-menu dropdown-menu-right">
                  <li class="dropdown-header">You have 5 notifications</li>
                  <li>
                    <a href="#">
                      <i class="mdi mdi-account-plus"></i> New user registered
                      <span class=" font-size-12 d-inline-block float-right"><i class="mdi mdi-clock-outline"></i> 10
                        AM</span>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <i class="mdi mdi-account-remove"></i> User deleted
                      <span class=" font-size-12 d-inline-block float-right"><i class="mdi mdi-clock-outline"></i> 07
                        AM</span>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <i class="mdi mdi-chart-areaspline"></i> Sales report is ready
                      <span class=" font-size-12 d-inline-block float-right"><i class="mdi mdi-clock-outline"></i> 12
                        PM</span>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <i class="mdi mdi-account-supervisor"></i> New client
                      <span class=" font-size-12 d-inline-block float-right"><i class="mdi mdi-clock-outline"></i> 10
                        AM</span>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <i class="mdi mdi-server-network-off"></i> Server overloaded
                      <span class=" font-size-12 d-inline-block float-right"><i class="mdi mdi-clock-outline"></i> 05
                        AM</span>
                    </a>
                  </li>
                  <li class="dropdown-footer">
                    <a class="text-center" href="#"> View All </a>
                  </li>
                </ul>
              </li>
              <!-- User Account -->
              <li class="dropdown user-menu">
                <button href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">
                  <img src="https://firebasestorage.googleapis.com/v0/b/nikeshoppingapp-rnfirebase.appspot.com/o/haunh270401.jpg?alt=media&token=0f10b837-1ee6-466f-a0ad-efdc9c50119c" 
                    class="user-image" alt="User Image" />
                  <span class="d-none d-lg-inline-block">Abdus Salam</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right">
                  <!-- User image -->
                  <li class="dropdown-header">
                    <img src="https://firebasestorage.googleapis.com/v0/b/nikeshoppingapp-rnfirebase.appspot.com/o/haunh270401.jpg?alt=media&token=0f10b837-1ee6-466f-a0ad-efdc9c50119c" 
                      class="img-circle" alt="User Image" />
                    <div class="d-inline-block">
                      Abdus Salam <small class="pt-1">abdus@gmail.com</small>
                    </div>
                  </li>
                  <li>
                    <a href="profile.html">
                      <i class="mdi mdi-account"></i> My Profile
                    </a>
                  </li>
                  <li>
                    <a href="email-inbox.html">
                      <i class="mdi mdi-email"></i> Message
                    </a>
                  </li>
                  <li>
                    <a href="#"> <i class="mdi mdi-diamond-stone"></i> Projects </a>
                  </li>
                  <li>
                    <a href="#"> <i class="mdi mdi-settings"></i> Account Setting </a>
                  </li>

                  <li class="dropdown-footer">
                    <a href="/logout"> <i class="mdi mdi-logout"></i> Log Out </a>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </nav>


      </header>


      <div class="content-wrapper">
        <div class="form-insert card card-table-border-none">
          <div class="title-addproduct">
            <h1>Update Products</h1>
          </div>

          <form action="/products/update/{{productEdit._id}}" method="POST" enctype="multipart/form-data">
            <div class="form-group">
              <label for="name">Name: </label>
              <input type="text" class="form-control" placeholder="Enter name" id="productName" name="productName"
                value="{{productEdit.productName}}">
            </div>
            <div class="form-group">
              <label for="price">Price:</label>
              <input type="number" class="form-control" placeholder="Enter price" id="price" name="price"
                value="{{productEdit.price}}">
            </div>
            <div class="form-group">
              <label for="idLoaiSP">Category</label>
              <select class="form-control" id="idLoaiSP" name="idLoaiSP">
                {{#each loaiSP}}
                {{#if (soSanh this._id productEdit.idLoaiSP)}}
                <option selected value="{{this._id}}">{{this.nameCategory}}</option>
                {{else}}
                <option value="{{this._id}}">{{this.nameCategory}}</option>
                {{/if}}
                {{/each}}

              </select>
            </div>

            <div class="form-group">
              <div class="row">
                <div class="form-group col-6">
                  <label for="date">Date:</label>
                  <input id="datepicker" width="276" name="date" value="{{formatDate productEdit.date}}" />
                </div>
                <div class="form-group col-6">
                  <label for="position">Sale?:</label>
                  <input type="number" class="form-control" value="{{productEdit.saleUpTo}}" placeholder="Sale"
                    id="saleUpTo" name="saleUpTo" />
                </div>
              </div>
            <div class="form-group">
              <label for="position">Details product:</label>
              <textarea id="detailsProduct" name="detailsProduct" rows="4" cols="100" class="form-control" placeholder="Write something..">{{productEdit.detailsProduct}}"</textarea>
            </div>
            </div>
            <div class="image-product form-group">
              <label class="form-label" for="customFile">Image product:</label>
              <input type="file" class="form-control" id="image" name="imgProduct" />
            </div>
            <div class="image-product form-group">
              <img style="min-width: 100px; min-height: 100px; width: auto; height: auto;" id="showImage"
                src="http://localhost:9000/images/{{productEdit.imgProduct}}" alt="your image" class=" col-12" />
            </div>
            <div class=" col-12">
              <button type="submit" class="btn btn-primary col-12">Submit</button>
            </div>
          </form>

        </div>
        <footer class="footer mt-auto">
          <div class="copyright bg-white">
            <p>
              &copy; <span id="copy-year">2019</span> Copyright Sleek Dashboard Bootstrap Template by
              <a class="text-primary" href="http://www.iamabdus.com/" target="_blank">Abdus</a>.
            </p>
          </div>
          <script>
            var d = new Date();
            var year = d.getFullYear();
            document.getElementById("copy-year").innerHTML = year;
          </script>
        </footer>

      </div>
    </div>

    <script>
      // date picker
      $("#datepicker").datepicker({
        uiLibrary: "bootstrap4",
      });
      var isValidName = false, isValidPrice = false, isValidDate = false;
      function validateProductName() {
        let value = document.getElementById('productName').value
        if (!value || value.length === 0 || value.length > 100) {
          document.getElementById('productNameError').innerText = 'Product name error!';
          isValidName = false;
        } else {
          document.getElementById('productNameError').innerText = '';
          isValidName = true;
        }
        validateForm();
      }

      function validateFormPrice() {
        let value = document.getElementById('price').value
        if (!value || value < 0 || value > 1000000000000) {
          document.getElementById('priceError').innerText = 'Error!';
          isValidPrice = false;
        } else {
          document.getElementById('priceError').innerText = '';
          isValidPrice = true;
        }
        validateForm();
      }

      function validateFormDate() {
        let value = document.getElementById('datepicker').value
        var varDate = new Date(value);
        var today = new Date();
        today.setHours(0, 0, 0, 0);

        console.log('now', today)
        today = Number(today);
        if (!varDate || varDate > today) {
          document.getElementById('dateError').innerText = 'Error!';
          isValidDate = false;
        } else {
          document.getElementById('dateError').innerText = '';
          isValidDate = true;
        }
        validateForm();
      }

      function validateForm() {
        if (isValidName == false || isValidPrice == false || isValidDate == false) {
          document.getElementById('btn_submit').disabled = true;
        }
        else {
          document.getElementById('btn_submit').disabled = false;
        }
      }


      function goBack() {
        window.location.href = "/products";
      }

      function readURL(input) {
        if (input.files && input.files[0]) {
          var reader = new FileReader();

          reader.onload = function (e) {
            $('#showImage').attr('src', e.target.result);
            $('#showImage').removeClass('d-none');
          }

          reader.readAsDataURL(input.files[0]); // convert to base64 string
        }
      }

      $("#image").change(function () {
        readURL(this);
      });

    </script>

  </div>

</body>

</html>